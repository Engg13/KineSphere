<div class="sleep-quality-container compact">
  <!-- Título -->
  <div class="header">
    <h4 class="titulo">{{ titulo }}</h4>
    <p class="descripcion">{{ descripcion }}</p>
  </div>

  <!-- Opciones compactas en línea -->
  <div class="opciones-compactas">
    @for (opcion of opciones; track opcion) {
      <div
        class="opcion-compacta"
        [class.selected]="valor === opcion.valor"
        [class.readonly]="readonly"
        (click)="seleccionarValor(opcion.valor)">
        <div class="icono-compacto">
          <ion-icon
            [name]="opcion.icono"
            [class]="'icono-color-' + opcion.color"
            size="small">
          </ion-icon>
        </div>
        <div class="texto-compacto">
          <div class="valor">{{ opcion.valor }}</div>
          <div class="texto">{{ opcion.texto.split(' ')[0] }}</div>
        </div>
      </div>
    }
  </div>

  <!-- Descripción de la selección (solo cuando hay selección) -->
  @if (valor > 0) {
    <div class="descripcion-seleccion">
      <ion-note>{{ getOpcionSeleccionada()?.descripcion }}</ion-note>
    </div>
  }

  <!-- Estado readonly -->
  @if (readonly) {
    <div class="readonly-notice">
      <ion-note>Calidad de sueño registrada</ion-note>
    </div>
  }
</div>