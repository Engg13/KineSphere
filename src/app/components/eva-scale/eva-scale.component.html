<div class="eva-scale-container compact">
  <!-- Header -->
  <div class="header">
    <h4 class="titulo">{{ titulo }}</h4>
    <p class="descripcion">{{ descripcion }}</p>
  </div>

  <!-- Escala numérica compacta -->
  <div class="escala-numerica">
    @for (escala of escalas; track escala) {
      <div
        class="numero-eva"
        [class.selected]="valor === escala.valor"
        [class.readonly]="readonly"
        (click)="seleccionarValor(escala.valor)">
        <div class="circulo-numero" [class]="'color-' + getColorEscala(escala.valor)">
          {{ escala.valor }}
        </div>
        @if (escala.texto.includes('-')) {
          <div class="etiqueta-nivel">
            {{ escala.texto.split('-')[1].trim() }}
          </div>
        }
      </div>
    }
  </div>

  <!-- Indicador de selección -->
  @if (valor !== null && valor !== undefined) {
    <div class="indicador-seleccion">
      <ion-badge [color]="getColorEscala(valor)">
        {{ getTextoEscala() }}
      </ion-badge>
    </div>
  }

  <!-- Estado readonly -->
  @if (readonly) {
    <div class="readonly-notice">
      <ion-note>Nivel de dolor registrado</ion-note>
    </div>
  }
</div>